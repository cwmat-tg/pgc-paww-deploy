"use strict";(self.webpackChunkpgc_paww_frontend=self.webpackChunkpgc_paww_frontend||[]).push([[680],{5680:(_,P,i)=>{i.r(P),i.d(P,{HomeModule:()=>V});var v=i(8239),g=i(1338),y=i(3757),p=i(1954),w=i(6738),e=i(7716),b=i(5987),S=i(8791),M=i(2238),Z=i(7298),h=i(8583),A=i(8030),T=i(5009),O=i(5618),U=i(1095),B=i(4732),N=i(5758),Y=i(1908),$=i(5162),I=i(2340),z=i(1228),R=i(4763),F=i(4137),J=i(1436),L=i(5047);function D(n,l){if(1&n){const o=e.EpF();e.TgZ(0,"button",1),e.NdJ("click",function(){return e.CHM(o),e.oxw().clicked()}),e._uU(1," Upload\n"),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("matTooltip",o.tooltipText)("matBadge",o.offlineObsCount)}}let j=(()=>{class n{constructor(o,t,a,s,m,r){this.api=o,this.dialog=t,this.connectionService=a,this.localStorageService=s,this.obsStore=m,this.auth=r,this.tooltipText=g.A.UploadTooltip,this.count=0,this.confNums=[],this.initialCount=0,this.offlineObs=[],this.offlineObsCount=0,this.uploadProcessed=new e.vpe,this.alluploadsProcessed=new e.vpe,this.isOffline=this.connectionService.isOffline,this.isOffline$=this.connectionService.isOffline$().subscribe(f=>{this.isOffline=f})}ngOnDestroy(){this.isOffline$.unsubscribe()}clicked(){this.dialog.open(y.W,{width:"35rem",data:{title:"Upload Observations",text:g.A.UploadTooltip,confirm:"Confirm Upload",cancel:"Cancel"},disableClose:!1}).afterClosed().subscribe(t=>{t&&this.preCheck()})}preCheck(){this.dialog.open(Y.z,{width:"35rem",data:{title:"Submit Observation",text:g.A.ConfirmSubmit,confirm:"Yes",cancel:"No"},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.offlineObs.forEach(a=>{this.processUpload(Object.assign({},a))})})}processUpload(o){var t=this;return(0,v.Z)(function*(){const a=t.dialog.open($.b,{width:"25rem",data:"Saving Observation.",disableClose:!0}),s=o.data,m=o.media;t.initialCount=t.offlineObsCount,yield t.auth.login().toPromise(),t.api.createObservation(s).subscribe(r=>{const f=[],u={ConfirmationNumber:I.N.useTestApi?r.name:r,SpeciesId:s.SpeciesId,Date:s.ObservationDate,ConfirmationAction:t.obsStore.getConfirmationAction(s)};m.length>0?(m.forEach(c=>{f.push(t.api.createObservationMedia(Object.assign(Object.assign({},c),{ConfirmationNumber:u.ConfirmationNumber})))}),(0,N.D)(f).subscribe(c=>{console.log(c),a.close(),t.localStorageService.removeObservation(o.dbId),t.checkConfNums(u)},c=>{console.error(c),a.close()})):(a.close(),t.localStorageService.removeObservation(o.dbId),t.checkConfNums(u))},r=>{console.error(r),a.close()})})()}checkConfNums(o){!o||(this.confNums.push(o),this.uploadProcessed.emit(o),this.initialCount===this.confNums.length&&this.alluploadsProcessed.emit(this.confNums))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(Z.s),e.Y36(M.uw),e.Y36(z.M),e.Y36(S.n),e.Y36(R.X),e.Y36(F.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-upload-offline"]],inputs:{offlineObs:"offlineObs",offlineObsCount:"offlineObsCount"},outputs:{uploadProcessed:"uploadProcessed",alluploadsProcessed:"alluploadsProcessed"},decls:1,vars:1,consts:[["mat-raised-button","","color","warn","matBadgePosition","before","matBadgeColor","accent",3,"matTooltip","matBadge","click",4,"ngIf"],["mat-raised-button","","color","warn","matBadgePosition","before","matBadgeColor","accent",3,"matTooltip","matBadge","click"]],template:function(o,t){1&o&&e.YNc(0,D,2,2,"button",0),2&o&&e.Q6J("ngIf",t.offlineObsCount>0&&!t.isOffline)},directives:[h.O5,U.lW,J.gM,L.k],styles:[""]}),n})();const k=["mainContents"],x=function(n){return{appSuperZoom:n}},Q=function(n){return{"background-image":n}},G=[{path:"",component:(()=>{class n{constructor(o,t,a,s,m,r){this.router=o,this.localStorageService=t,this.dialog=a,this.api=s,this.cd=m,this.locationStrategy=r,this.appName=p.y.AppName,this.appAbbrev=p.y.AppAbbrev,this.isSuperZoom=!1,this.gameCommissionPhone=p.y.GameCommissionPhone,this.offlineObs=[],this.offlineObsCount=0,this.basePageHeight=900,this.basePageOffsetSmall=500,this.basePageOffsetExtraSmall=500,this.basePageHeightStyle="height: 100vh;",this.bgImg=["homepage_01","homepage_02","homepage_03","homepage_04","homepage_05","homepage_06","homepage_07","homepage_08","homepage_09","homepage_10","homepage_11","homepage_12","homepage_13","homepage_14"],this.currentBgImg=`${window.location.origin}${this.locationStrategy.getBaseHref()}assets/images/${this.bgImg[Math.floor(Math.random()*this.bgImg.length)]}.png`}ngOnInit(){this.loadOfflineObservations(),this.onResize(null)}ngAfterViewInit(){this.setPageHeight()}onResize(o){console.log("Resize",o),this.setPageHeight(),this.isSuperZoom=(window.outerWidth-10)/window.innerWidth*100>=300}setPageHeight(){var o,t;if(!this.mainContents)return;this.basePageHeightStyle="height: 100vh;",this.cd.detectChanges();const a=window.innerWidth,s=(null===(t=null===(o=this.mainContents)||void 0===o?void 0:o.nativeElement)||void 0===t?void 0:t.clientHeight)||null;a<1200&&a>=376?(console.log("m detected"),this.basePageHeight=s+this.basePageOffsetSmall,this.basePageHeightStyle=`height: ${this.basePageHeight}px`):a<376?(console.log("xs detected"),this.basePageHeight=s+this.basePageOffsetExtraSmall,this.basePageHeightStyle=`height: ${this.basePageHeight}px`):(console.log("l detected"),this.basePageHeightStyle="height: 100vh;"),this.cd.detectChanges()}createObservation(){this.router.navigate(["/app/observation"])}loadOfflineObservations(){var o=this;return(0,v.Z)(function*(){o.offlineObs=yield o.localStorageService.getObservations(),o.offlineObsCount=o.offlineObs.length})()}uploadProcessed(o){this.loadOfflineObservations()}alluploadsProcessed(o){var t=this;return(0,v.Z)(function*(){const a=yield t.api.getSpecies().toPromise();a&&(o=o.map(d=>{var H;const K=null===(H=a.find(X=>d.SpeciesId===X.SpeciesId))||void 0===H?void 0:H.Name;return Object.assign(Object.assign({},d),{SpeciesName:K})}));const s=o.filter(d=>d.ConfirmationAction===p.y.ConfFreshActionNeeded),m=o.filter(d=>d.ConfirmationAction===p.y.ConfFreshNoAction),r=o.filter(d=>d.ConfirmationAction===p.y.ConfStale),f=t.createUploadSection(s),u=t.createUploadSection(m),c=t.createUploadSection(r);let C=`\n      <div class="appConfirmTop">${g.A.BulkUploadConfirmation}</div>\n    `;(m.length>0||r.length>0)&&(C+=`\n      <h1 class="appUploadHeader">${p.y.ConfirmationHeaderNoActionNeeded}</h1>\n      <div class="appUploadMessage">${g.A.ConfirmNoActionNeededShort}</div>\n      <div class="appUploadMessage">Your confirmation numbers are:</div>\n      <div>${u}</div>\n      <div>${c}</div>\n      `),s.length>0&&(C+=`\n      <h1 class="appUploadHeader">${p.y.ConfirmationHeaderActionNeeded}</h1>\n      <div class="appUploadMessage">${g.A.ConfirmActionNeededShort}</div>\n      <div class="appUploadMessage">Your confirmation numbers are:</div>\n      <div>${f}</div>\n      `),t.dialog.open(y.W,{width:"45rem",data:{title:p.y.ConfirmationHeader,text:C,confirm:"Close"},disableClose:!1})})()}createUploadSection(o){let t="";return o.forEach(a=>{t+=this.createUploadRow(a)}),t}createUploadRow(o){return`<p><strong>${o.ConfirmationNumber} - ${o.SpeciesName} - ${w(o.Date).format("DD/MM/YYYY")}</strong></p>`}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(b.F0),e.Y36(S.n),e.Y36(M.uw),e.Y36(Z.s),e.Y36(e.sBO),e.Y36(h.S$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],viewQuery:function(o,t){if(1&o&&e.Gf(k,5),2&o){let a;e.iGM(a=e.CRH())&&(t.mainContents=a.first)}},hostBindings:function(o,t){1&o&&e.NdJ("resize",function(s){return t.onResize(s)},!1,e.Jf7)},decls:28,vars:16,consts:[["id","appHomeContainer",3,"ngClass"],["id","appHomeImage",3,"ngStyle"],["id","appHomepageContent"],["mainContents",""],[1,"appFillContainer"],["fxLayout","row","fxLayout.xs","column","fxLayout.sm","column","fxLayoutAlign","end center","fxLayoutAlign.xs","start center","fxLayoutAlign.sm","start center","fxFlex",""],["fxFlex","50","fxFlex.xs","100","fxFlex.sm","100","id","appHeroContainer"],["id","appHeroContent",1,"appHomepageText"],[1,"appHomeLink",3,"href"],["href","https://www.pgc.pa.gov/wildlifehealth","target","_blank",1,"appHomeLink"],["mat-flat-button","","color","basic","id","appObservationButton","type","button",3,"click"],[1,"appOnHomepage",3,"ngClass"],["id","appUploadButtonContainer"],[3,"offlineObs","offlineObsCount","uploadProcessed","alluploadsProcessed"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-header"),e._UZ(2,"div",1),e.TgZ(3,"div",2,3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"p"),e._uU(10," You can play a critical role in wildlife health surveillance! "),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14," If you require immediate assistance, please call the Game Commission at "),e.TgZ(15,"a",8),e._uU(16),e.qZA(),e._uU(17,". "),e.qZA(),e.TgZ(18,"p"),e._uU(19," Thank you for helping the Game Commission track and respond to wildlife health events! More information can be found at "),e.TgZ(20,"a",9),e._uU(21,"pgc.pa.gov/wildlifehealth"),e.qZA(),e._uU(22,". "),e.qZA(),e.qZA(),e.TgZ(23,"button",10),e.NdJ("click",function(){return t.createObservation()}),e._uU(24," Submit an Observation "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(25,"app-footer",11),e.qZA(),e.TgZ(26,"div",12),e.TgZ(27,"app-upload-offline",13),e.NdJ("uploadProcessed",function(s){return t.uploadProcessed(s)})("alluploadsProcessed",function(s){return t.alluploadsProcessed(s)}),e.qZA(),e.qZA()),2&o&&(e.Akn(t.basePageHeightStyle),e.Q6J("ngClass",e.VKq(10,x,t.isSuperZoom)),e.xp6(2),e.Q6J("ngStyle",e.VKq(12,Q,"url("+t.currentBgImg+")")),e.xp6(10),e.hij(" The Pennsylvania Game Commission's ",t.appName," enables the public to easily report observations of wildlife health issues occurring within the Commonwealth. Any wild birds or mammals that appear abnormal, injured, sick, or are found dead should be reported. Remember to always remain at a safe distance when observing wildlife and do not handle wildlife unless you are hunting, trapping, or authorized to do so. "),e.xp6(3),e.Q6J("href","tel:"+t.gameCommissionPhone,e.LSH),e.xp6(1),e.Oqu(t.gameCommissionPhone),e.xp6(9),e.Q6J("ngClass",e.VKq(14,x,t.isSuperZoom)),e.xp6(2),e.Q6J("offlineObs",t.offlineObs)("offlineObsCount",t.offlineObsCount))},directives:[h.mk,A.oO,T.G,h.PC,A.Zl,O.xw,O.Wh,O.yH,U.lW,B.c,j],styles:["#appHomeContainer[_ngcontent-%COMP%]{background-color:#000;height:100vh;width:100vw;position:absolute;top:0;left:0;overflow:hidden}#appHomeImage[_ngcontent-%COMP%]{height:100%;background-size:cover;background-position:center}#appHomepageContent[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%;width:100vw}.appFillContainer[_ngcontent-%COMP%]{background:linear-gradient(270deg,#2a381e 0%,rgba(42,56,30,.25) 100%);height:100%}#appHeroContainer[_ngcontent-%COMP%]{margin-right:3rem}.appHomepageText[_ngcontent-%COMP%]{text-align:end;color:#fff}#appHeroHeader[_ngcontent-%COMP%]{font-size:2.75rem;font-weight:800;letter-spacing:0;line-height:3.75rem}#appHeroContent[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;letter-spacing:0;line-height:1.875rem}#appObservationButton[_ngcontent-%COMP%]{float:right;color:#0b0603;font-size:1.438rem;font-weight:800;letter-spacing:0;line-height:2rem;margin-top:2rem;min-height:3.75rem;min-width:21.875rem}#appDisclaimer[_ngcontent-%COMP%]{position:absolute;bottom:2rem;left:2rem;color:#fff;margin-right:2rem}[_nghost-%COMP%]     app-header{position:fixed;width:100%;z-index:99}[_nghost-%COMP%]     app-footer.appOnHomepage{position:absolute;width:100%;z-index:99;bottom:0}#appUploadButtonContainer[_ngcontent-%COMP%]{position:fixed;left:2rem;bottom:7rem}.appFillContainer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{max-width:100vw}.appHomeLink[_ngcontent-%COMP%]{color:#fff}@media only screen and (max-width: 480px){#appHeroContainer[_ngcontent-%COMP%]{margin-right:.5rem;margin-left:.5rem}.appHomepageText[_ngcontent-%COMP%]{text-align:center}#appObservationButton[_ngcontent-%COMP%]{float:none;margin:2rem auto auto;display:block}#appHomepageContent[_ngcontent-%COMP%]{padding-top:4.5rem}#appHomeContainer.appSuperZoom[_ngcontent-%COMP%]{height:600vh!important}#appUploadButtonContainer[_ngcontent-%COMP%]{bottom:7rem}}@media only screen and (min-width: 321px){#appHomepageContent[_ngcontent-%COMP%]{padding-top:4.5rem}[_nghost-%COMP%]     app-footer.appOnHomepage.appSuperZoom{bottom:0}#appUploadButtonContainer[_ngcontent-%COMP%]{bottom:7rem}}@media only screen and (min-width: 1224px){#appHomepageContent[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]     app-footer.appOnHomepage{bottom:0}#appUploadButtonContainer[_ngcontent-%COMP%]{bottom:5rem}}@media only screen and (min-width: 1824px){#appHomepageContent[_ngcontent-%COMP%]{padding-top:0}[_nghost-%COMP%]     app-footer.appOnHomepage{bottom:0}#appUploadButtonContainer[_ngcontent-%COMP%]{bottom:5rem}}"]}),n})()}];let W=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[b.Bz.forChild(G)],b.Bz]}),n})();var E=i(7121);let V=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,E.m,W]]}),n})()}}]);